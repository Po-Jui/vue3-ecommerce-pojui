"use strict";(self["webpackChunkvue3_ecommerce_pojui"]=self["webpackChunkvue3_ecommerce_pojui"]||[]).push([[257],{8285:function(t,a,s){s.d(a,{A:function(){return k}});var o=s(641),i=s(9322),e=s(2644);const l={"aria-label":"Page navigation example"},c={class:"pagination justify-content-center"},n={class:"page-item"},r=(0,o.Lk)("span",{"aria-hidden":"true"},"«",-1),d=[r],u=["onClick"],p={class:"page-item"},f=(0,o.Lk)("span",{"aria-hidden":"true"},"»",-1),m=[f];function g(t,a,s,r,f,g){return(0,o.uX)(),(0,o.CE)("nav",l,[(0,o.Lk)("ul",c,[(0,o.Lk)("li",n,[(0,o.Lk)("a",{class:"page-link",href:"#",onClick:a[0]||(a[0]=(0,i.D$)((t=>g.updatePage(s.pages.current_page-1)),["prevent"])),"aria-label":"Previous"},d)]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.pages.total_pages,(t=>((0,o.uX)(),(0,o.CE)("li",{class:(0,e.C4)(["page-item",{active:t===s.pages.current_page}]),key:t},[(0,o.Lk)("a",{class:"page-link",href:"#",onClick:(0,i.D$)((a=>g.updatePage(t)),["prevent"])},(0,e.v_)(t),9,u)],2)))),128)),(0,o.Lk)("li",p,[(0,o.Lk)("a",{class:"page-link",href:"#",onClick:a[1]||(a[1]=(0,i.D$)((t=>g.updatePage(s.pages.current_page+1)),["prevent"])),"aria-label":"Next"},m)])])])}var h={props:["pages"],methods:{updatePage(t){this.$emit("emit-pages",t)}}},v=s(6262);const b=(0,v.A)(h,[["render",g]]);var k=b},9257:function(t,a,s){s.r(a),s.d(a,{default:function(){return ot}});var o=s(641),i=s(2644),e=s(9322);const l=t=>((0,o.Qi)("data-v-ff589b5c"),t=t(),(0,o.jt)(),t),c=l((()=>(0,o.Lk)("div",{class:"follow-banner"},[(0,o.Lk)("h2",{class:"text-center"},"追蹤商品")],-1))),n={class:"container follow-box"},r={class:"row"},d={class:"col-lg-8 col-md-12 mx-auto"},u=l((()=>(0,o.Lk)("i",{class:"loading-box"},null,-1))),p={class:"follow-title"},f={key:0},m={key:1},g=l((()=>(0,o.Lk)("option",{value:"",disabled:""},"商品排序",-1))),h=l((()=>(0,o.Lk)("option",{value:"highToLow"},"價格由高至低",-1))),v=l((()=>(0,o.Lk)("option",{value:"lowToHigh"},"價格由低至高",-1))),b=[g,h,v],k={key:0,class:"mb-5"},w={class:"followItem","data-aos":"fade-right"},C={class:"d-flex"},L=["src"],x={class:"followItem-content"},y={class:"followItem-category"},I={class:"followItem-cart"},D={key:0,class:"followItem-origin-price pl-3"},_=l((()=>(0,o.Lk)("br",null,null,-1))),P={class:"followItem-price pl-3"},E=["disabled","onClick"],X=l((()=>(0,o.Lk)("i",{class:"fas fa-spinner fa-spin"},null,-1))),A=["onClick"],$={class:"m-followItem-cart"},H={class:"m-fol-money"},F={key:0,class:"m-folItem-origin-price pr-2"},T={class:"pr-2 m-folItem-price"},M=["disabled","onClick"],j=l((()=>(0,o.Lk)("i",{class:"fas fa-spinner fa-spin"},null,-1))),U=["onClick"],W=["onClick"],B=l((()=>(0,o.Lk)("i",{class:"fas fa-times"},null,-1))),G=[B],Q={key:1,class:"my-5 no-follow"},V=l((()=>(0,o.Lk)("p",null,"目前沒有收藏任何商品唷！",-1))),q=l((()=>(0,o.Lk)("i",{class:"fas fa-reply mr-2"},null,-1))),z={key:0,class:"bg-follow-footer"},J=(0,o.Fv)('<div class="container pt-4" data-v-ff589b5c><h4 class="font-weight-bold text-center h4" data-v-ff589b5c>香氛蠟燭冷知識</h4><div class="row mt-4 m-footer-follow" data-v-ff589b5c><div class="col-lg-4 col-md-6 mb-4" data-aos="zoom-in" data-v-ff589b5c><div class="knowledge-img position-relative" style="background-image:url(https://images.unsplash.com/photo-1616968173950-4abf6a34c4b7?q=80&amp;w=1972&amp;auto=format&amp;fit=crop&amp;ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D);" data-v-ff589b5c><div class="knowledge-box" data-v-ff589b5c><h5 class="font-weight-bolder pt-3 pb-2 pl-4" data-v-ff589b5c>顏色與香味</h5><p class="px-4 my-3" data-v-ff589b5c> 蠟燭的顏色和香味可以對情緒產生影響。例如，藍色蠟燭常被認為有助於放鬆，而柑橘類香味可以提神醒腦。 </p></div></div></div><div class="col-lg-4 col-md-6 mb-4" data-aos="zoom-in" data-v-ff589b5c><div class="knowledge-img position-relative" style="background-image:url(https://images.unsplash.com/photo-1597318109735-d3612887d1ad?q=80&amp;w=2071&amp;auto=format&amp;fit=crop&amp;ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D);" data-v-ff589b5c><div class="knowledge-box" data-v-ff589b5c><h5 class="font-weight-bolder pt-3 pb-2 pl-4" data-v-ff589b5c>健康益處</h5><p class="px-4 my-3" data-v-ff589b5c> 一些香氛蠟燭含有精油，如薰衣草、迷迭香、桉樹等，這些精油有助於放鬆、減壓和改善睡眠品質。 </p></div></div></div><div class="col-lg-4 col-md-6 mb-4" data-aos="zoom-in" data-v-ff589b5c><div class="knowledge-img position-relative" style="background-image:url(https://images.unsplash.com/photo-1589536677029-c0aa1808fba6?q=80&amp;w=1780&amp;auto=format&amp;fit=crop&amp;ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D);" data-v-ff589b5c><div class="knowledge-box" data-v-ff589b5c><h5 class="font-weight-bolder pt-3 pb-2 pl-4" data-v-ff589b5c>香味釋放</h5><p class="px-4 my-3" data-v-ff589b5c> 香氛蠟燭的香味釋放來自於蠟燭燃燒時加熱的香精油。這些油在高溫下揮發，釋放出香味。 </p></div></div></div></div></div>',1),Y=[J];function K(t,a,s,l,g,h){const v=(0,o.g2)("loading"),B=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",null,[c,(0,o.Lk)("div",n,[(0,o.Lk)("div",r,[(0,o.Lk)("div",d,[(0,o.bF)(v,{active:g.isLoading},{default:(0,o.k6)((()=>[u])),_:1},8,["active"]),(0,o.Lk)("div",p,[(0,o.Lk)("h3",null,[(0,o.eW)(" 我的收藏 "),g.followProduct.length>0?((0,o.uX)(),(0,o.CE)("span",f,"( "+(0,i.v_)(g.followProduct.length)+" )",1)):((0,o.uX)(),(0,o.CE)("span",m,"( 0 )"))]),g.followProduct.length>0?(0,o.bo)(((0,o.uX)(),(0,o.CE)("select",{key:0,name:"sortData",id:"sortData","onUpdate:modelValue":a[0]||(a[0]=t=>g.sortData=t),class:"form-control follow-sort mb-2",onChange:a[1]||(a[1]=t=>h.sortProduct())},b,544)),[[e.u1,g.sortData]]):(0,o.Q3)("",!0)]),g.followProduct.length>0?((0,o.uX)(),(0,o.CE)("div",k,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(g.followProduct,(a=>((0,o.uX)(),(0,o.CE)("div",{class:"mb-3",key:a.id},[(0,o.Lk)("div",w,[(0,o.Lk)("div",C,[(0,o.bF)(B,{to:`/product/${a.id}`},{default:(0,o.k6)((()=>[(0,o.Lk)("img",{class:"followItem-img",src:a.imageUrl,alt:""},null,8,L)])),_:2},1032,["to"]),(0,o.Lk)("div",x,[(0,o.Lk)("h5",null,(0,i.v_)(a.title),1),(0,o.Lk)("p",null,(0,i.v_)(a.content),1),(0,o.Lk)("p",y,(0,i.v_)(a.category),1)])]),(0,o.Lk)("div",I,[0!==a.origin_price?((0,o.uX)(),(0,o.CE)("span",D,(0,i.v_)(t.$filters.currency(a.origin_price)),1)):(0,o.Q3)("",!0),_,(0,o.Lk)("span",P,(0,i.v_)(t.$filters.currency(a.price)),1),(0,o.Lk)("span",null,[g.status.loadingItem===a.id?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"btn btn-shopping btn-sm",type:"button",disabled:g.status.loadingItem===a.id,onClick:t=>h.addToCart(a.id)},[X,(0,o.eW)(" 加到購物車 ")],8,E)):((0,o.uX)(),(0,o.CE)("button",{key:1,class:"btn btn-shopping btn-sm",type:"button",onClick:t=>h.addToCart(a.id)}," 加到購物車 ",8,A))])]),(0,o.Lk)("div",$,[(0,o.Lk)("div",H,[0!==a.origin_price?((0,o.uX)(),(0,o.CE)("span",F,(0,i.v_)(t.$filters.currency(a.origin_price)),1)):(0,o.Q3)("",!0),(0,o.Lk)("span",T,(0,i.v_)(t.$filters.currency(a.price)),1)]),g.status.loadingItem===a.id?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"btn btn-shopping btn-sm",type:"button",disabled:g.status.loadingItem===a.id,onClick:t=>h.addToCart(a.id)},[j,(0,o.eW)(" 加到購物車 ")],8,M)):((0,o.uX)(),(0,o.CE)("button",{key:1,class:"btn btn-shopping btn-sm",type:"button",onClick:t=>h.addToCart(a.id)}," 加到購物車 ",8,U))]),(0,o.Lk)("button",{href:"#",class:"follow-close",onClick:(0,e.D$)((t=>h.delFollow(a.id)),["prevent"])},G,8,W)])])))),128))])):((0,o.uX)(),(0,o.CE)("div",Q,[V,(0,o.bF)(B,{to:"/products",class:"text-cyanine"},{default:(0,o.k6)((()=>[q,(0,o.eW)(" 逛逛商品 ")])),_:1})]))])])]),g.isLoading?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("section",z,Y))])}var N=s(2541),O=s(8285),S=s(6723),Z=s(1601),R=s(1884),tt={data(){return{isLoading:!1,status:{loadingItem:""},products:{},followProduct:{},sortData:"",followData:[],pagination:{},carts:{},uid:null}},components:{Pagination:O.A},created(){this.getAuthState(),this.getProducts()},watch:{uid(t,a){t?console.log("User is logged in with UID:",t):(console.log("User is logged out or email is not verified"),this.$router.replace("/userlogin"))}},methods:{getAuthState(){(0,Z.hg)(S.j2,(t=>{t?t.emailVerified?(this.uid=t.uid,this.updateUserCartItem()):this.uid=null:(this.uid=null,N.A.fire({icon:"warning",title:"請先登入會員"}),this.$router.replace("/userlogin"))}))},async updateUserCartItem(t){const a=(0,R.rJ)(S.db,"userInfo"),s=(0,R.H9)(a,this.uid),o=await(0,R.x7)(s);if(o.exists()){if(this.userCartItems=o.data().cartItem,void 0!==t){const a=this.userCartItems.findIndex((a=>a.product.id===t.product.id));-1!==a&&this.userCartItems.splice(a,1),this.userCartItems.push(t),await(0,R.mZ)(s,{cartItem:this.userCartItems})}console.log("userCartItems:",this.userCartItems)}else console.log("No such document!")},getProducts(){const t="https://vue3-course-api.hexschool.io/api/luxefume-api/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{this.products=t.data.products,null!==this.uid&&this.getFollow(),this.isLoading=!1})).catch((()=>{N.A.fire({title:"資料讀取失敗，請稍後再試",icon:"error"}),this.isLoading=!1}))},async getFollow(){const t=(0,R.rJ)(S.db,"userInfo"),a=(0,R.H9)(t,this.uid),s=await(0,R.x7)(a);s.exists()&&(this.followData=s.data().favorite,console.log("followData:",this.followData)),this.followProduct=this.products.filter((t=>this.followData.indexOf(t.id)>-1))},addToCart(t){this.status.loadingItem=t;const a="https://vue3-course-api.hexschool.io/api/luxefume-api/cart",s={product_id:t,qty:1};this.$http.post(a,{data:s}).then((t=>{this.updateUserCartItem(t.data.data),setTimeout((()=>{this.status.loadingItem="",this.$emitter.emit("update-total"),N.A.fire({title:"已加入購物車",icon:"success"})}),500)})).catch((t=>{this.status.loadingItem="",N.A.fire({title:`${t.response.data.errors}`,icon:"warning"})}))},async delFollow(t){const a=this.followData.indexOf(t);if(-1!==a){this.followData.splice(a,1),N.A.fire({title:"已取消收藏",icon:"success"});const t=(0,R.rJ)(S.db,"userInfo"),s=(0,R.H9)(t,this.uid),o=await(0,R.x7)(s);o.exists()&&await(0,R.mZ)(s,{favorite:this.followData})}this.getProducts()},sortProduct(){this.followProduct.sort(((t,a)=>"lowToHigh"===this.sortData?t.price-a.price:"highToLow"===this.sortData?a.price-t.price:this.followProduct))}}},at=s(6262);const st=(0,at.A)(tt,[["render",K],["__scopeId","data-v-ff589b5c"]]);var ot=st}}]);
//# sourceMappingURL=257.594f14ee.js.map
"use strict";(self["webpackChunkvue3_ecommerce_pojui"]=self["webpackChunkvue3_ecommerce_pojui"]||[]).push([[219],{47:function(e,t,a){a.r(t),a.d(t,{default:function(){return va}});var l=a(641),o=a(2644),r=a(9322),i=a(5518),s=a(4272),n=a(2082),u=a(1332),d=a(8507),c=a(2877),p=a(1963),m=a(1470),f=a(5551),v=a(1766),g=a(9823),h=a(4759),b=a(7487),y=a(9841),w=a(1094),k=a(4717),F=a(2636),x=a(4675);const S=(0,w.j)({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>"boolean"===typeof e||[1e3,1024].includes(Number(e))},...(0,f.V)({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>(0,k.BN)(e).every((e=>null!=e&&"object"===typeof e))},...(0,m.tG)({clearable:!0})},"VFileInput"),P=(0,F.RW)()({name:"VFileInput",inheritAttrs:!1,props:S(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:a,emit:o,slots:r}=t;const{t:i}=(0,h.Ym)(),s=(0,b.q)(e,"modelValue",e.modelValue,(e=>(0,k.BN)(e)),(t=>e.multiple||Array.isArray(e.modelValue)?t:t[0]??null)),{isFocused:n,focus:u,blur:d}=(0,v.i)(e),w=(0,l.EW)((()=>"boolean"!==typeof e.showSize?e.showSize:void 0)),F=(0,l.EW)((()=>(s.value??[]).reduce(((e,t)=>{let{size:a=0}=t;return e+a}),0))),S=(0,l.EW)((()=>(0,k.hA)(F.value,w.value))),P=(0,l.EW)((()=>(s.value??[]).map((t=>{const{name:a="",size:l=0}=t;return e.showSize?`${a} (${(0,k.hA)(l,w.value)})`:a})))),I=(0,l.EW)((()=>{const t=s.value?.length??0;return e.showSize?i(e.counterSizeString,t,S.value):i(e.counterString,t)})),_=(0,y.KR)(),V=(0,y.KR)(),C=(0,y.KR)(),W=(0,l.EW)((()=>n.value||e.active)),D=(0,l.EW)((()=>["plain","underlined"].includes(e.variant)));function E(){C.value!==document.activeElement&&C.value?.focus(),n.value||u()}function $(e){C.value?.click()}function A(e){o("mousedown:control",e)}function L(e){C.value?.click(),o("click:control",e)}function B(t){t.stopPropagation(),E(),(0,l.dY)((()=>{s.value=[],(0,k.P)(e["onClick:clear"],t)}))}return(0,l.wB)(s,(e=>{const t=!Array.isArray(e)||!e.length;t&&C.value&&(C.value.value="")})),(0,x.C)((()=>{const t=!(!r.counter&&!e.counter),o=!(!t&&!r.details),[i,u]=(0,k.ph)(a),{modelValue:v,...g}=f.Z.filterProps(e),h=(0,m.jz)(e);return(0,l.bF)(f.Z,(0,l.v6)({ref:_,modelValue:s.value,"onUpdate:modelValue":e=>s.value=e,class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":D.value},e.class],style:e.style,"onClick:prepend":$},i,g,{centerAffix:!D.value,focused:n.value}),{...r,default:t=>{let{id:a,isDisabled:o,isDirty:i,isReadonly:p,isValid:f}=t;return(0,l.bF)(m.xR,(0,l.v6)({ref:V,"prepend-icon":e.prependIcon,onMousedown:A,onClick:L,"onClick:clear":B,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},h,{id:a.value,active:W.value||i.value,dirty:i.value||e.dirty,disabled:o.value,focused:n.value,error:!1===f.value}),{...r,default:t=>{let{props:{class:a,...i}}=t;return(0,l.bF)(l.FK,null,[(0,l.bF)("input",(0,l.v6)({ref:C,type:"file",readonly:p.value,disabled:o.value,multiple:e.multiple,name:e.name,onClick:e=>{e.stopPropagation(),p.value&&e.preventDefault(),E()},onChange:e=>{if(!e.target)return;const t=e.target;s.value=[...t.files??[]]},onFocus:E,onBlur:d},i,u),null),(0,l.bF)("div",{class:a},[!!s.value?.length&&!e.hideInput&&(r.selection?r.selection({fileNames:P.value,totalBytes:F.value,totalBytesReadable:S.value}):e.chips?P.value.map((e=>(0,l.bF)(c.x,{key:e,size:"small",text:e},null))):P.value.join(", "))])])}})},details:o?a=>(0,l.bF)(l.FK,null,[r.details?.(a),t&&(0,l.bF)(l.FK,null,[(0,l.bF)("span",null,null),(0,l.bF)(p.p,{active:!!s.value?.length,value:I.value,disabled:e.disabled},r.counter)])]):void 0})})),(0,g.O)({},_,V,C)}});var I=a(7027),_=a(4492),V=(a(5792),a(4019));const C=(0,V.G)("v-spacer","div","VSpacer");var W=a(6861),D=a(8517),E=a(1686),$=a(4915),A=a(7683),L=a(6286),B=a(3091);const T=e=>((0,l.Qi)("data-v-6979663a"),e=e(),(0,l.jt)(),e),N={class:"user-banner"},R={key:0,class:"text-center"},O={key:1,class:"text-center"},j={key:0,class:"container user-member-box"},U={class:"row"},M={class:"col-lg-6 col-md-12 mx-auto mt-3"},q={class:"d-flex align-center justify-space-between"},K=T((()=>(0,l.Lk)("span",null,"姓名",-1))),z={class:"counter ml-2"},G={class:"d-flex align-center justify-space-between"},X=T((()=>(0,l.Lk)("span",null,"手機號碼",-1))),H={class:"counter ml-2"},Y={key:1,class:"container user-login-box my-5"},Q={class:"row"},J={class:"col-lg-4 col-md-8 mx-auto"},Z=T((()=>(0,l.Lk)("i",{class:"loading-box"},null,-1))),ee={class:"mb-5"},te={class:"mb-3"},ae={class:"user-login-item"},le={class:"d-flex"};function oe(e,t,a,c,p,m){const f=(0,l.g2)("OrderHistory"),v=(0,l.g2)("ForgetPassword"),g=(0,l.g2)("loading"),h=(0,l.g2)("Register");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.Lk)("div",N,[p.isLogin?((0,l.uX)(),(0,l.CE)("h2",R,"會員中心")):((0,l.uX)(),(0,l.CE)("h2",O,"會員登入"))]),p.isLogin?((0,l.uX)(),(0,l.CE)("div",j,[(0,l.Lk)("div",U,[(0,l.Lk)("div",M,[(0,l.bF)(E.h,{class:"mt-3",modelValue:p.tab,"onUpdate:modelValue":t[0]||(t[0]=e=>p.tab=e),grow:"","align-tabs":"center",color:"light-blue-accent-4"},{default:(0,l.k6)((()=>[(0,l.bF)($.U,{value:0,class:"font-weight-bold"},{default:(0,l.k6)((()=>[(0,l.eW)("修改個人資料")])),_:1}),(0,l.bF)($.U,{value:1,class:"font-weight-bold"},{default:(0,l.k6)((()=>[(0,l.eW)("歷史訂單查詢")])),_:1}),p.tabCtrl?((0,l.uX)(),(0,l.Wv)($.U,{key:0,value:2,class:"font-weight-bold"},{default:(0,l.k6)((()=>[(0,l.eW)("修改密碼")])),_:1})):(0,l.Q3)("",!0)])),_:1},8,["modelValue"]),(0,l.bF)(A.l,{modelValue:p.tab,"onUpdate:modelValue":t[8]||(t[8]=e=>p.tab=e)},{default:(0,l.k6)((()=>[(0,l.bF)(L.Y,{value:0},{default:(0,l.k6)((()=>[(0,l.bF)(_.I,{fluid:""},{default:(0,l.k6)((()=>[(0,l.bF)(I.n,{modelValue:p.valid,"onUpdate:modelValue":t[7]||(t[7]=e=>p.valid=e),ref:"profileForm"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",{onClick:t[1]||(t[1]=(...e)=>m.triggerFileInput&&m.triggerFileInput(...e)),style:{width:"100px"}},[p.member.image?((0,l.uX)(),(0,l.Wv)(D.y,{key:0,src:p.member.image,class:"my-4 profile-img"},null,8,["src"])):((0,l.uX)(),(0,l.Wv)(D.y,{key:1,src:"https://www.iconpacks.net/icons/2/free-user-camera-icon-3355-thumb.png",class:"my-4 profile-img"}))]),(0,l.bF)(P,{ref:"fileInput",class:"d-none",modelValue:p.uploadImageDetail,"onUpdate:modelValue":t[2]||(t[2]=e=>p.uploadImageDetail=e),accept:"image/*",onChange:m.onImageChange},null,8,["modelValue","onChange"]),p.member.image?((0,l.uX)(),(0,l.Wv)(i.D,{key:0,color:"red",onClick:m.removeImage,class:"mb-3"},{default:(0,l.k6)((()=>[(0,l.eW)(" 刪除圖片 ")])),_:1},8,["onClick"])):(0,l.Q3)("",!0),(0,l.bF)(B.W,{"prepend-icon":"mdi-account",modelValue:p.member.name,"onUpdate:modelValue":t[3]||(t[3]=e=>p.member.name=e),modelModifiers:{trim:!0},rules:[p.rules.required],maxlength:"25",placeholder:"請輸入姓名",required:""},{label:(0,l.k6)((()=>[(0,l.Lk)("div",q,[K,(0,l.Lk)("span",z,(0,o.v_)(p.member.name.length)+"/25",1)])])),_:1},8,["modelValue","rules"]),(0,l.bF)(B.W,{"prepend-icon":"mdi-email",modelValue:p.member.email,"onUpdate:modelValue":t[4]||(t[4]=e=>p.member.email=e),modelModifiers:{trim:!0},label:"電子郵件",disabled:""},{append:(0,l.k6)((()=>[p.tabCtrl?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(i.D,{key:0,color:"success"},{default:(0,l.k6)((()=>[(0,l.bF)(W.w,null,{default:(0,l.k6)((()=>[(0,l.eW)("mdi-google")])),_:1}),(0,l.eW)(" 已驗證 ")])),_:1})),p.tabCtrl?((0,l.uX)(),(0,l.Wv)(i.D,{key:1,color:"success"},{default:(0,l.k6)((()=>[(0,l.eW)(" 已驗證 ")])),_:1})):(0,l.Q3)("",!0)])),_:1},8,["modelValue"]),(0,l.bF)(B.W,{"prepend-icon":"mdi-cellphone",modelValue:p.member.phone,"onUpdate:modelValue":t[5]||(t[5]=e=>p.member.phone=e),modelModifiers:{trim:!0},rules:[p.rules.phone],maxlength:"10",placeholder:"請輸入手機號碼",required:""},{label:(0,l.k6)((()=>[(0,l.Lk)("div",G,[X,(0,l.Lk)("span",H,(0,o.v_)(p.member.phone.length)+"/10",1)])])),_:1},8,["modelValue","rules"]),(0,l.bF)(B.W,{"prepend-icon":"mdi-map-marker",modelValue:p.member.address,"onUpdate:modelValue":t[6]||(t[6]=e=>p.member.address=e),modelModifiers:{trim:!0},rules:[p.rules.noSpacesOrSpecial],label:"地址",placeholder:"請輸入地址",required:""},null,8,["modelValue","rules"]),(0,l.bF)(i.D,{class:"mb-3 w-100",color:"primary",onClick:m.updateMember},{default:(0,l.k6)((()=>[(0,l.eW)(" 確認修改 ")])),_:1},8,["onClick"]),(0,l.bF)(i.D,{block:"",color:"danger",onClick:m.logout},{default:(0,l.k6)((()=>[(0,l.eW)("登出")])),_:1},8,["onClick"])])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,l.bF)(L.Y,{value:1},{default:(0,l.k6)((()=>[(0,l.bF)(_.I,{fluid:""},{default:(0,l.k6)((()=>[(0,l.bF)(f,{ordersInfo:p.propsItem},null,8,["ordersInfo"])])),_:1})])),_:1}),(0,l.bF)(L.Y,{value:2},{default:(0,l.k6)((()=>[(0,l.bF)(_.I,{fluid:""},{default:(0,l.k6)((()=>[(0,l.bF)(v,{onSwitchTab:m.switchTab},null,8,["onSwitchTab"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])])):((0,l.uX)(),(0,l.CE)("div",Y,[(0,l.Lk)("div",Q,[(0,l.Lk)("div",J,[(0,l.bF)(g,{active:p.isLoading},{default:(0,l.k6)((()=>[Z])),_:1},8,["active"]),(0,l.Lk)("div",ee,[(0,l.Lk)("div",te,[(0,l.Lk)("div",ae,[(0,l.Lk)("div",le,[(0,l.bF)(s.J,{class:"elevation-12"},{default:(0,l.k6)((()=>[(0,l.bF)(E.h,{grow:"",modelValue:p.tab,"onUpdate:modelValue":t[9]||(t[9]=e=>p.tab=e),"align-tabs":"center",color:"light-blue-accent-4"},{default:(0,l.k6)((()=>[(0,l.bF)($.U,{value:0,class:"font-weight-bold"},{default:(0,l.k6)((()=>[(0,l.eW)("登入")])),_:1}),(0,l.bF)($.U,{value:1,class:"font-weight-bold"},{default:(0,l.k6)((()=>[(0,l.eW)("註冊")])),_:1}),(0,l.bF)($.U,{value:2,class:"font-weight-bold"},{default:(0,l.k6)((()=>[(0,l.eW)("忘記密碼")])),_:1})])),_:1},8,["modelValue"]),(0,l.bF)(A.l,{modelValue:p.tab,"onUpdate:modelValue":t[16]||(t[16]=e=>p.tab=e)},{default:(0,l.k6)((()=>[(0,l.bF)(L.Y,{value:0},{default:(0,l.k6)((()=>[(0,l.bF)(s.J,{class:"elevation-12"},{default:(0,l.k6)((()=>[(0,l.bF)(n.O,null,{default:(0,l.k6)((()=>[(0,l.bF)(I.n,{ref:"loginForm",modelValue:p.valid,"onUpdate:modelValue":t[14]||(t[14]=e=>p.valid=e),"lazy-validation":""},{default:(0,l.k6)((()=>[(0,l.bF)(B.W,{"prepend-icon":"mdi-account",modelValue:p.login.account,"onUpdate:modelValue":t[10]||(t[10]=e=>p.login.account=e),rules:[p.rules.required,p.rules.email],label:"帳號",type:"text",placeholder:"請輸入email",required:""},null,8,["modelValue","rules"]),(0,l.bF)(B.W,{type:p.showPassword?"text":"password","prepend-icon":"mdi-lock",modelValue:p.login.password,"onUpdate:modelValue":t[13]||(t[13]=e=>p.login.password=e),rules:[p.rules.required,p.rules.hasUpperCase,p.rules.hasLowerCase,p.rules.min,p.rules.noSpacesOrSpecial],label:"密碼",placeholder:"請輸入密碼",required:""},{append:(0,l.k6)((()=>[(0,l.bF)(W.w,{onMousedown:t[11]||(t[11]=e=>m.togglePasswordVisibility(!0)),onMouseup:t[12]||(t[12]=e=>m.togglePasswordVisibility(!1))},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)(p.showPassword?"mdi-eye":"mdi-eye-off"),1)])),_:1})])),_:1},8,["type","modelValue","rules"])])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(u.S,null,{default:(0,l.k6)((()=>[(0,l.bF)(C),(0,l.bF)(i.D,{color:"success",onClick:(0,r.D$)(m.loginSubmit,["prevent"])},{default:(0,l.k6)((()=>[(0,l.eW)("登入")])),_:1},8,["onClick"]),(0,l.bF)(i.D,{text:"",color:"warning",onClick:t[15]||(t[15]=e=>m.switchTab(2))},{default:(0,l.k6)((()=>[(0,l.eW)("忘記密碼?")])),_:1})])),_:1}),(0,l.bF)(d.G,null,{default:(0,l.k6)((()=>[(0,l.eW)("第三方登入")])),_:1}),(0,l.bF)(_.I,{class:"d-flex justify-center",style:{width:"50%"}},{default:(0,l.k6)((()=>[(0,l.bF)(D.y,{class:"hover-image",src:p.googleLogo,alt:"Google Logo",onClick:m.loginWithGoogle},null,8,["src","onClick"])])),_:1})])),_:1})])),_:1}),(0,l.bF)(L.Y,{value:1},{default:(0,l.k6)((()=>[(0,l.bF)(h,{onSwitchTab:m.switchTab},null,8,["onSwitchTab"])])),_:1}),(0,l.bF)(L.Y,{value:2},{default:(0,l.k6)((()=>[(0,l.bF)(v,{onSwitchTab:m.switchTab},null,8,["onSwitchTab"])])),_:1})])),_:1},8,["modelValue"])])),_:1})])])])])])])]))])}function re(e,t,a,d,c,p){return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.bF)(s.J,{class:"elevation-12"},{default:(0,l.k6)((()=>[(0,l.bF)(n.O,null,{default:(0,l.k6)((()=>[(0,l.bF)(I.n,{ref:"registerForm",modelValue:c.valid,"onUpdate:modelValue":t[9]||(t[9]=e=>c.valid=e),"lazy-validation":""},{default:(0,l.k6)((()=>[(0,l.bF)(B.W,{"prepend-icon":"mdi-account-arrow-left",modelValue:c.register.firstName,"onUpdate:modelValue":t[0]||(t[0]=e=>c.register.firstName=e),modelModifiers:{trim:!0},rules:[c.rules.required,c.rules.noSpacesOrSpecial],label:"名字",placeholder:"請輸入名字",required:""},null,8,["modelValue","rules"]),(0,l.bF)(B.W,{"prepend-icon":"mdi-account-arrow-right",modelValue:c.register.lastName,"onUpdate:modelValue":t[1]||(t[1]=e=>c.register.lastName=e),modelModifiers:{trim:!0},rules:[c.rules.required,c.rules.noSpacesOrSpecial],label:"姓氏",placeholder:"請輸入姓氏",required:""},null,8,["modelValue","rules"]),(0,l.bF)(B.W,{"prepend-icon":"mdi-email",modelValue:c.register.email,"onUpdate:modelValue":t[2]||(t[2]=e=>c.register.email=e),modelModifiers:{trim:!0},rules:[c.rules.required,c.rules.email],label:"電子郵件",placeholder:"請輸入email",required:""},null,8,["modelValue","rules"]),(0,l.bF)(B.W,{type:c.showPassword?"text":"password","prepend-icon":"mdi-lock",modelValue:c.register.password,"onUpdate:modelValue":t[5]||(t[5]=e=>c.register.password=e),modelModifiers:{trim:!0},rules:[c.rules.required,c.rules.hasUpperCase,c.rules.hasLowerCase,c.rules.min,c.rules.noSpacesOrSpecial],label:"密碼",placeholder:"請輸入密碼",required:""},{append:(0,l.k6)((()=>[(0,l.bF)(W.w,{onMousedown:t[3]||(t[3]=e=>p.togglePasswordVisibility(!0)),onMouseup:t[4]||(t[4]=e=>p.togglePasswordVisibility(!1))},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)(c.showPassword?"mdi-eye":"mdi-eye-off"),1)])),_:1})])),_:1},8,["type","modelValue","rules"]),(0,l.bF)(B.W,{type:c.showconfirmPassword?"text":"password","prepend-icon":"mdi-lock-check",modelValue:c.register.confirmPassword,"onUpdate:modelValue":t[8]||(t[8]=e=>c.register.confirmPassword=e),modelModifiers:{trim:!0},rules:[c.rules.required,p.passwordMatch],label:"密碼確認",placeholder:"請再輸入一次密碼",required:""},{append:(0,l.k6)((()=>[(0,l.bF)(W.w,{onMousedown:t[6]||(t[6]=e=>p.toggleConfirmPasswordVisibility(!0)),onMouseup:t[7]||(t[7]=e=>p.toggleConfirmPasswordVisibility(!1))},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)(c.showconfirmPassword?"mdi-eye":"mdi-eye-off"),1)])),_:1})])),_:1},8,["type","modelValue","rules"]),(0,l.bF)(u.S,null,{default:(0,l.k6)((()=>[(0,l.bF)(C),(0,l.bF)(i.D,{color:"success",onClick:(0,r.D$)(p.registerSubmit,["prevent"])},{default:(0,l.k6)((()=>[(0,l.eW)("提交")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])}var ie=a(2541),se=a(6723),ne=a(1884),ue=a(1601),de={data(){return{valid:!1,register:{firstName:"",lastName:"",email:"",password:"",confirmPassword:""},showPassword:!1,showconfirmPassword:!1,rules:{noSpacesOrSpecial:e=>{const t=/^[^\s!@#$%^&*(),.?":{}|<>]*$/;return t.test(e)||"不得包含空白或特殊符號"},required:e=>!!e||"此欄位為必填項",email:e=>{const t=/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/;return t.test(e)||"請輸入有效的電子郵件地址"},min:e=>e.length>=6||"密碼至少需要6個字符",max:e=>e.length<=25||"姓名最多25個字符",hasUpperCase:e=>/[A-Z]/.test(e)||"需包含至少一個大寫英文字母",hasLowerCase:e=>/[a-z]/.test(e)||"需包含至少一個小寫英文字母"}}},methods:{togglePasswordVisibility(){this.showPassword=!this.showPassword},toggleConfirmPasswordVisibility(){this.showconfirmPassword=!this.showconfirmPassword},passwordMatch(e){return e===this.register.password||"密碼不匹配"},registerSubmit(){this.isLoading=!0,this.isRegistering=!0,this.$refs.registerForm.validate().then((e=>{!1===e.valid?ie.A.fire({icon:"error",title:"請輸入正確資訊"}):(0,ue.eJ)(se.j2,this.register.email,this.register.password).then((e=>{const t=e.user;(0,ue.r7)(t,{displayName:this.register.firstName+" "+this.register.lastName}).then((()=>{se.j2.languageCode="zh-TW",(0,ue.gA)(se.j2.currentUser).then((()=>{ie.A.fire({icon:"success",title:"註冊成功，驗證信已發送到您的信箱，請點選信中驗證連結"})}))})),this.addUserInfoWithCustomId(t.uid),this.register={email:"",password:"",firstName:"",lastName:"",confirmPassword:""},this.$refs.registerForm.reset(),this.$emit("switchTab",0)})).catch((e=>{switch(console.log(`錯誤：${e.message}`),e.message){case"Firebase: Error (auth/email-already-in-use).":ie.A.fire({icon:"error",title:"帳號已註冊，請到登入頁面登入"});break;default:ie.A.fire({icon:"error",title:"註冊失敗"});break}}))})),this.isLoading=!1},async addUserInfoWithCustomId(e){try{const t=(0,ne.H9)(se.db,"userInfo",e);await(0,ne.BN)(t,{address:"",phoneNumber:"",photoURL:null,orders:[],cartItem:[],favorite:[]})}catch(t){console.error("Error adding document: ",t)}}}},ce=a(6262);const pe=(0,ce.A)(de,[["render",re]]);var me=pe;function fe(e,t,a,o,u,d){return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.bF)(s.J,{class:"elevation-12"},{default:(0,l.k6)((()=>[(0,l.bF)(n.O,null,{default:(0,l.k6)((()=>[(0,l.bF)(I.n,{ref:"forgetPassword"},{default:(0,l.k6)((()=>[(0,l.bF)(B.W,{"prepend-icon":"mdi-email",ref:"forgetPassword",modelValue:u.forgetPassword,"onUpdate:modelValue":t[0]||(t[0]=e=>u.forgetPassword=e),modelModifiers:{trim:!0},rules:[u.rules.required,u.rules.email],label:"請輸入email"},null,8,["modelValue","rules"]),(0,l.bF)(i.D,{class:"mt-2",type:"submit",block:"",onClick:(0,r.D$)(d.findPassword,["prevent"])},{default:(0,l.k6)((()=>[(0,l.eW)("重設密碼")])),_:1},8,["onClick"])])),_:1},512)])),_:1})])),_:1})])}var ve={name:"ForgetPassword",data(){return{forgetPassword:"",rules:{required:e=>!!e||"此欄位為必填項",email:e=>{const t=/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/;return t.test(e)||"請輸入有效的電子郵件地址"}}}},methods:{findPassword(){this.$refs.forgetPassword.validate().then((e=>{console.log(e),e.length>0?ie.A.fire({icon:"error",title:"請輸入正確資訊"}):(0,ue.J1)(se.j2,this.forgetPassword).then((()=>{ie.A.fire({icon:"success",title:"如果您的信箱已註冊，我們將發送密碼重置郵件給您，請至您的信箱點選信中連結設定新密碼"}),this.forgetPassword="",this.$emit("switchTab",0),this.$refs.forgetPassword.reset()})).catch((e=>{switch(console.log(`錯誤：${e.message}`),e.message){case"Firebase: Error (auth/missing-email).":ie.A.fire({icon:"error",title:"請輸入正確信箱"});break}}))}))}}};const ge=(0,ce.A)(ve,[["render",fe]]);var he=ge,be=a(1828),ye=a(1348),we=a(5851),ke=a(7562),Fe=a(62),xe=a(19),Se=a(8107);function Pe(){const e=(0,y.KR)([]);function t(t,a){e.value[a]=t}return(0,l.Ic)((()=>e.value=[])),{refs:e,updateRef:t}}var Ie=a(2336),_e=a(5501),Ve=a(8021),Ce=a(1070),We=a(5841),De=a(2997);const Ee=(0,w.j)({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:Se.TX,default:"$first"},prevIcon:{type:Se.TX,default:"$prev"},nextIcon:{type:Se.TX,default:"$next"},lastIcon:{type:Se.TX,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...(0,ye.r)(),...(0,we.u)(),...(0,Fe.r)(),...(0,xe.s)(),...(0,_e.S)(),...(0,Ve.k)(),...(0,Ce.X)({tag:"nav"}),...(0,We.yx)(),...(0,De.gI)({variant:"text"})},"VPagination"),$e=(0,F.RW)()({name:"VPagination",props:Ee(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,t){let{slots:a,emit:o}=t;const r=(0,b.q)(e,"modelValue"),{t:s,n:n}=(0,h.Ym)(),{isRtl:u}=(0,h.IA)(),{themeClasses:d}=(0,We.NX)(e),{width:c}=(0,be._F)(),p=(0,y.IJ)(-1);(0,ke.Uh)(void 0,{scoped:!0});const{resizeRef:m}=(0,Ie.w)((e=>{if(!e.length)return;const{target:t,contentRect:a}=e[0],l=t.querySelector(".v-pagination__list > *");if(!l)return;const o=a.width,r=l.offsetWidth+2*parseFloat(getComputedStyle(l).marginRight);p.value=w(o,r)})),f=(0,l.EW)((()=>parseInt(e.length,10))),v=(0,l.EW)((()=>parseInt(e.start,10))),g=(0,l.EW)((()=>null!=e.totalVisible?parseInt(e.totalVisible,10):p.value>=0?p.value:w(c.value,58)));function w(t,a){const l=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(+((t-a*l)/a).toFixed(2)))}const F=(0,l.EW)((()=>{if(f.value<=0||isNaN(f.value)||f.value>Number.MAX_SAFE_INTEGER)return[];if(g.value<=0)return[];if(1===g.value)return[r.value];if(f.value<=g.value)return(0,k.Sd)(f.value,v.value);const t=g.value%2===0,a=t?g.value/2:Math.floor(g.value/2),l=t?a:a+1,o=f.value-a;if(l-r.value>=0)return[...(0,k.Sd)(Math.max(1,g.value-1),v.value),e.ellipsis,f.value];if(r.value-o>=(t?1:0)){const t=g.value-1,a=f.value-t+v.value;return[v.value,e.ellipsis,...(0,k.Sd)(t,a)]}{const t=Math.max(1,g.value-3),a=1===t?r.value:r.value-Math.ceil(t/2)+v.value;return[v.value,e.ellipsis,...(0,k.Sd)(t,a),e.ellipsis,f.value]}}));function S(e,t,a){e.preventDefault(),r.value=t,a&&o(a,t)}const{refs:P,updateRef:I}=Pe();(0,ke.Uh)({VPaginationBtn:{color:(0,y.lW)(e,"color"),border:(0,y.lW)(e,"border"),density:(0,y.lW)(e,"density"),size:(0,y.lW)(e,"size"),variant:(0,y.lW)(e,"variant"),rounded:(0,y.lW)(e,"rounded"),elevation:(0,y.lW)(e,"elevation")}});const _=(0,l.EW)((()=>F.value.map(((t,a)=>{const l=e=>I(e,a);if("string"===typeof t)return{isActive:!1,key:`ellipsis-${a}`,page:t,props:{ref:l,ellipsis:!0,icon:!0,disabled:!0}};{const a=t===r.value;return{isActive:a,key:t,page:n(t),props:{ref:l,ellipsis:!1,icon:!0,disabled:!!e.disabled||+e.length<2,color:a?e.activeColor:e.color,"aria-current":a,"aria-label":s(a?e.currentPageAriaLabel:e.pageAriaLabel,t),onClick:e=>S(e,t)}}}})))),V=(0,l.EW)((()=>{const t=!!e.disabled||r.value<=v.value,a=!!e.disabled||r.value>=v.value+f.value-1;return{first:e.showFirstLastPage?{icon:u.value?e.lastIcon:e.firstIcon,onClick:e=>S(e,v.value,"first"),disabled:t,"aria-label":s(e.firstAriaLabel),"aria-disabled":t}:void 0,prev:{icon:u.value?e.nextIcon:e.prevIcon,onClick:e=>S(e,r.value-1,"prev"),disabled:t,"aria-label":s(e.previousAriaLabel),"aria-disabled":t},next:{icon:u.value?e.prevIcon:e.nextIcon,onClick:e=>S(e,r.value+1,"next"),disabled:a,"aria-label":s(e.nextAriaLabel),"aria-disabled":a},last:e.showFirstLastPage?{icon:u.value?e.firstIcon:e.lastIcon,onClick:e=>S(e,v.value+f.value-1,"last"),disabled:a,"aria-label":s(e.lastAriaLabel),"aria-disabled":a}:void 0}}));function C(){const e=r.value-v.value;P.value[e]?.$el.focus()}function W(t){t.key===k.K7.left&&!e.disabled&&r.value>+e.start?(r.value=r.value-1,(0,l.dY)(C)):t.key===k.K7.right&&!e.disabled&&r.value<v.value+f.value-1&&(r.value=r.value+1,(0,l.dY)(C))}return(0,x.C)((()=>(0,l.bF)(e.tag,{ref:m,class:["v-pagination",d.value,e.class],style:e.style,role:"navigation","aria-label":s(e.ariaLabel),onKeydown:W,"data-test":"v-pagination-root"},{default:()=>[(0,l.bF)("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&(0,l.bF)("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[a.first?a.first(V.value.first):(0,l.bF)(i.D,(0,l.v6)({_as:"VPaginationBtn"},V.value.first),null)]),(0,l.bF)("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[a.prev?a.prev(V.value.prev):(0,l.bF)(i.D,(0,l.v6)({_as:"VPaginationBtn"},V.value.prev),null)]),_.value.map(((e,t)=>(0,l.bF)("li",{key:e.key,class:["v-pagination__item",{"v-pagination__item--is-active":e.isActive}],"data-test":"v-pagination-item"},[a.item?a.item(e):(0,l.bF)(i.D,(0,l.v6)({_as:"VPaginationBtn"},e.props),{default:()=>[e.page]})]))),(0,l.bF)("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[a.next?a.next(V.value.next):(0,l.bF)(i.D,(0,l.v6)({_as:"VPaginationBtn"},V.value.next),null)]),e.showFirstLastPage&&(0,l.bF)("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[a.last?a.last(V.value.last):(0,l.bF)(i.D,(0,l.v6)({_as:"VPaginationBtn"},V.value.last),null)])])]}))),{}}});var Ae=a(7512),Le=a(4268);const Be=(0,w.j)({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),Te=Symbol.for("vuetify:data-table-pagination");function Ne(e){const t=(0,b.q)(e,"page",void 0,(e=>+(e??1))),a=(0,b.q)(e,"itemsPerPage",void 0,(e=>+(e??10)));return{page:t,itemsPerPage:a}}function Re(e){const{page:t,itemsPerPage:a,itemsLength:o}=e,r=(0,l.EW)((()=>-1===a.value?0:a.value*(t.value-1))),i=(0,l.EW)((()=>-1===a.value?o.value:Math.min(o.value,r.value+a.value))),s=(0,l.EW)((()=>-1===a.value||0===o.value?1:Math.ceil(o.value/a.value)));function n(e){a.value=e,t.value=1}function u(){t.value=(0,k.qE)(t.value+1,1,s.value)}function d(){t.value=(0,k.qE)(t.value-1,1,s.value)}function c(e){t.value=(0,k.qE)(e,1,s.value)}(0,l.nT)((()=>{t.value>s.value&&(t.value=s.value)}));const p={page:t,itemsPerPage:a,startIndex:r,stopIndex:i,pageCount:s,itemsLength:o,nextPage:u,prevPage:d,setPage:c,setItemsPerPage:n};return(0,l.Gt)(Te,p),p}function Oe(){const e=(0,l.WQ)(Te);if(!e)throw new Error("Missing pagination!");return e}function je(e){const t=(0,Le.nI)("usePaginatedItems"),{items:a,startIndex:o,stopIndex:r,itemsPerPage:i}=e,s=(0,l.EW)((()=>i.value<=0?a.value:a.value.slice(o.value,r.value)));return(0,l.wB)(s,(e=>{t.emit("update:currentItems",e)})),{paginatedItems:s}}const Ue=(0,w.j)({prevIcon:{type:String,default:"$prev"},nextIcon:{type:String,default:"$next"},firstIcon:{type:String,default:"$first"},lastIcon:{type:String,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),Me=(0,F.RW)()({name:"VDataTableFooter",props:Ue(),setup(e,t){let{slots:a}=t;const{t:o}=(0,h.Ym)(),{page:r,pageCount:i,startIndex:s,stopIndex:n,itemsLength:u,itemsPerPage:d,setItemsPerPage:c}=Oe(),p=(0,l.EW)((()=>e.itemsPerPageOptions.map((e=>"number"===typeof e?{value:e,title:-1===e?o("$vuetify.dataFooter.itemsPerPageAll"):String(e)}:{...e,title:isNaN(Number(e.title))?o(e.title):e.title}))));return(0,x.C)((()=>{const t=$e.filterProps(e);return(0,l.bF)("div",{class:"v-data-table-footer"},[a.prepend?.(),(0,l.bF)("div",{class:"v-data-table-footer__items-per-page"},[(0,l.bF)("span",null,[o(e.itemsPerPageText)]),(0,l.bF)(Ae.d4,{items:p.value,modelValue:d.value,"onUpdate:modelValue":e=>c(Number(e)),density:"compact",variant:"outlined","hide-details":!0},null)]),(0,l.bF)("div",{class:"v-data-table-footer__info"},[(0,l.bF)("div",null,[o(e.pageText,u.value?s.value+1:0,n.value,u.value)])]),(0,l.bF)("div",{class:"v-data-table-footer__pagination"},[(0,l.bF)($e,(0,l.v6)({modelValue:r.value,"onUpdate:modelValue":e=>r.value=e,density:"comfortable","first-aria-label":e.firstPageLabel,"last-aria-label":e.lastPageLabel,length:i.value,"next-aria-label":e.nextPageLabel,"previous-aria-label":e.prevPageLabel,rounded:!0,"show-first-last-page":!0,"total-visible":e.showCurrentPage?1:0,variant:"plain"},t),null)])])})),{}}}),qe=(0,F.cq)({align:{type:String,default:"start"},fixed:Boolean,fixedOffset:[Number,String],height:[Number,String],lastFixed:Boolean,noPadding:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},((e,t)=>{let{slots:a}=t;const o=e.tag??"td";return(0,l.bF)(o,{class:["v-data-table__td",{"v-data-table-column--fixed":e.fixed,"v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap},`v-data-table-column--align-${e.align}`],style:{height:(0,k.Dg)(e.height),width:(0,k.Dg)(e.width),maxWidth:(0,k.Dg)(e.maxWidth),left:(0,k.Dg)(e.fixedOffset||null)}},{default:()=>[a.default?.()]})}));var Ke=a(5866),ze=a(4653);const Ge=(0,w.j)({headers:Array},"DataTable-header"),Xe=Symbol.for("vuetify:data-table-headers"),He={title:"",sortable:!1},Ye={...He,width:48};function Qe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=e.map((e=>({element:e,priority:0})));return{enqueue:(e,a)=>{let l=!1;for(let o=0;o<t.length;o++){const r=t[o];if(r.priority>a){t.splice(o,0,{element:e,priority:a}),l=!0;break}}l||t.push({element:e,priority:a})},size:()=>t.length,count:()=>{let e=0;if(!t.length)return 0;const a=Math.floor(t[0].priority);for(let l=0;l<t.length;l++)Math.floor(t[l].priority)===a&&(e+=1);return e},dequeue:()=>t.shift()}}function Je(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e.children)for(const a of e.children)Je(a,t);else t.push(e);return t}function Ze(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;for(const a of e)a.key&&t.add(a.key),a.children&&Ze(a.children,t);return t}function et(e){if(e.key)return"data-table-group"===e.key?He:["data-table-expand","data-table-select"].includes(e.key)?Ye:void 0}function tt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.children?Math.max(t,...e.children.map((e=>tt(e,t+1)))):t}function at(e){let t=!1;function a(e){let l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)if(l&&(e.fixed=!0),e.fixed)if(e.children)for(let t=e.children.length-1;t>=0;t--)a(e.children[t],!0);else t?isNaN(+e.width)&&(0,ze.yA)(`Multiple fixed columns should have a static width (key: ${e.key})`):e.lastFixed=!0,t=!0;else if(e.children)for(let t=e.children.length-1;t>=0;t--)a(e.children[t]);else t=!1}for(let r=e.length-1;r>=0;r--)a(e[r]);function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e)return t;if(e.children){e.fixedOffset=t;for(const a of e.children)t=l(a,t)}else e.fixed&&(e.fixedOffset=t,t+=parseFloat(e.width||"0")||0);return t}let o=0;for(const r of e)o=l(r,o)}function lt(e,t){const a=[];let l=0;const o=Qe(e);while(o.size()>0){let e=o.count();const r=[];let i=1;while(e>0){const{element:a,priority:s}=o.dequeue(),n=t-l-tt(a);if(r.push({...a,rowspan:n??1,colspan:a.children?Je(a).length:1}),a.children)for(const e of a.children){const t=s%1+i/Math.pow(10,l+2);o.enqueue(e,l+n+t)}i+=1,e-=1}l+=1,a.push(r)}const r=e.map((e=>Je(e))).flat();return{columns:r,headers:a}}function ot(e){const t=[];for(const a of e){const e={...et(a),...a},l=e.key??("string"===typeof e.value?e.value:null),o=e.value??l??null,r={...e,key:l,value:o,sortable:e.sortable??(null!=e.key||!!e.sort),children:e.children?ot(e.children):void 0};t.push(r)}return t}function rt(e,t){const a=(0,y.KR)([]),r=(0,y.KR)([]),i=(0,y.KR)({}),s=(0,y.KR)({}),n=(0,y.KR)({});(0,l.nT)((()=>{const l=e.headers||Object.keys(e.items[0]??{}).map((e=>({key:e,title:(0,o.ZH)(e)}))),u=l.slice(),d=Ze(u);t?.groupBy?.value.length&&!d.has("data-table-group")&&u.unshift({key:"data-table-group",title:"Group"}),t?.showSelect?.value&&!d.has("data-table-select")&&u.unshift({key:"data-table-select"}),t?.showExpand?.value&&!d.has("data-table-expand")&&u.push({key:"data-table-expand"});const c=ot(u);at(c);const p=Math.max(...c.map((e=>tt(e))))+1,m=lt(c,p);a.value=m.headers,r.value=m.columns;const f=m.headers.flat(1);for(const e of f)e.key&&(e.sortable&&(e.sort&&(i.value[e.key]=e.sort),e.sortRaw&&(s.value[e.key]=e.sortRaw)),e.filter&&(n.value[e.key]=e.filter))}));const u={headers:a,columns:r,sortFunctions:i,sortRawFunctions:s,filterFunctions:n};return(0,l.Gt)(Xe,u),u}function it(){const e=(0,l.WQ)(Xe);if(!e)throw new Error("Missing headers!");return e}const st={showSelectAll:!1,allSelected:()=>[],select:e=>{let{items:t,value:a}=e;return new Set(a?[t[0]?.value]:[])},selectAll:e=>{let{selected:t}=e;return t}},nt={showSelectAll:!0,allSelected:e=>{let{currentPage:t}=e;return t},select:e=>{let{items:t,value:a,selected:l}=e;for(const o of t)a?l.add(o.value):l.delete(o.value);return l},selectAll:e=>{let{value:t,currentPage:a,selected:l}=e;return nt.select({items:a,value:t,selected:l})}},ut={showSelectAll:!0,allSelected:e=>{let{allItems:t}=e;return t},select:e=>{let{items:t,value:a,selected:l}=e;for(const o of t)a?l.add(o.value):l.delete(o.value);return l},selectAll:e=>{let{value:t,allItems:a,selected:l}=e;return ut.select({items:a,value:t,selected:l})}},dt=(0,w.j)({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:{type:Function,default:k.bD}},"DataTable-select"),ct=Symbol.for("vuetify:data-table-selection");function pt(e,t){let{allItems:a,currentPage:o}=t;const r=(0,b.q)(e,"modelValue",e.modelValue,(t=>new Set((0,k.BN)(t).map((t=>a.value.find((a=>e.valueComparator(t,a.value)))?.value??t)))),(e=>[...e.values()])),i=(0,l.EW)((()=>a.value.filter((e=>e.selectable)))),s=(0,l.EW)((()=>o.value.filter((e=>e.selectable)))),n=(0,l.EW)((()=>{if("object"===typeof e.selectStrategy)return e.selectStrategy;switch(e.selectStrategy){case"single":return st;case"all":return ut;case"page":default:return nt}}));function u(e){return(0,k.BN)(e).every((e=>r.value.has(e.value)))}function d(e){return(0,k.BN)(e).some((e=>r.value.has(e.value)))}function c(e,t){const a=n.value.select({items:e,value:t,selected:new Set(r.value)});r.value=a}function p(e){c([e],!u([e]))}function m(e){const t=n.value.selectAll({value:e,allItems:i.value,currentPage:s.value,selected:new Set(r.value)});r.value=t}const f=(0,l.EW)((()=>r.value.size>0)),v=(0,l.EW)((()=>{const e=n.value.allSelected({allItems:i.value,currentPage:s.value});return!!e.length&&u(e)})),g=(0,l.EW)((()=>n.value.showSelectAll)),h={toggleSelect:p,select:c,selectAll:m,isSelected:u,isSomeSelected:d,someSelected:f,allSelected:v,showSelectAll:g};return(0,l.Gt)(ct,h),h}function mt(){const e=(0,l.WQ)(ct);if(!e)throw new Error("Missing selection!");return e}const ft=(0,w.j)({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),vt=Symbol.for("vuetify:data-table-sort");function gt(e){const t=(0,b.q)(e,"sortBy"),a=(0,y.lW)(e,"mustSort"),l=(0,y.lW)(e,"multiSort");return{sortBy:t,mustSort:a,multiSort:l}}function ht(e){const{sortBy:t,mustSort:a,multiSort:o,page:r}=e,i=e=>{if(null==e.key)return;let l=t.value.map((e=>({...e})))??[];const i=l.find((t=>t.key===e.key));i?"desc"===i.order?a.value?i.order="asc":l=l.filter((t=>t.key!==e.key)):i.order="desc":l=o.value?[...l,{key:e.key,order:"asc"}]:[{key:e.key,order:"asc"}],t.value=l,r&&(r.value=1)};function s(e){return!!t.value.find((t=>t.key===e.key))}const n={sortBy:t,toggleSort:i,isSorted:s};return(0,l.Gt)(vt,n),n}function bt(){const e=(0,l.WQ)(vt);if(!e)throw new Error("Missing sort!");return e}function yt(e,t,a,o){const r=(0,h.Ym)(),i=(0,l.EW)((()=>!a.value.length||e.disableSort?t.value:wt(t.value,a.value,r.current.value,{transform:o?.transform,sortFunctions:{...e.customKeySort,...o?.sortFunctions?.value},sortRawFunctions:o?.sortRawFunctions?.value})));return{sortedItems:i}}function wt(e,t,a,l){const o=new Intl.Collator(a,{sensitivity:"accent",usage:"sort"}),r=e.map((e=>[e,l?.transform?l.transform(e):e]));return r.sort(((e,a)=>{for(let r=0;r<t.length;r++){let i=!1;const s=t[r].key,n=t[r].order??"asc";if(!1===n)continue;let u=e[1][s],d=a[1][s],c=e[0].raw,p=a[0].raw;if("desc"===n&&([u,d]=[d,u],[c,p]=[p,c]),l?.sortRawFunctions?.[s]){const e=l.sortRawFunctions[s](c,p);if(null==e)continue;if(i=!0,e)return e}if(l?.sortFunctions?.[s]){const e=l.sortFunctions[s](u,d);if(null==e)continue;if(i=!0,e)return e}if(!i){if(u instanceof Date&&d instanceof Date)return u.getTime()-d.getTime();if([u,d]=[u,d].map((e=>null!=e?e.toString().toLocaleLowerCase():e)),u!==d)return(0,k.Im)(u)&&(0,k.Im)(d)?0:(0,k.Im)(u)?-1:(0,k.Im)(d)?1:isNaN(u)||isNaN(d)?o.compare(u,d):Number(u)-Number(d)}}return 0})).map((e=>{let[t]=e;return t}))}var kt=a(3683),Ft=a(1679);const xt=(0,w.j)({color:String,sticky:Boolean,disableSort:Boolean,multiSort:Boolean,sortAscIcon:{type:Se.TX,default:"$sortAsc"},sortDescIcon:{type:Se.TX,default:"$sortDesc"},headerProps:{type:Object},...(0,be.hx)(),...(0,Ft.gi)()},"VDataTableHeaders"),St=(0,F.RW)()({name:"VDataTableHeaders",props:xt(),setup(e,t){let{slots:a}=t;const{t:o}=(0,h.Ym)(),{toggleSort:r,sortBy:i,isSorted:s}=bt(),{someSelected:n,allSelected:u,selectAll:d,showSelectAll:p}=mt(),{columns:m,headers:f}=it(),{loaderClasses:v}=(0,Ft.pn)(e);function g(t,a){if(e.sticky||t.fixed)return{position:"sticky",left:t.fixed?(0,k.Dg)(t.fixedOffset):void 0,top:e.sticky?`calc(var(--v-table-header-height) * ${a})`:void 0}}function b(t){const a=i.value.find((e=>e.key===t.key));return a?"asc"===a.order?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:y,backgroundColorStyles:w}=(0,kt.z6)(e,"color"),{displayClasses:F,mobile:S}=(0,be._F)(e),P=(0,l.EW)((()=>({headers:f.value,columns:m.value,toggleSort:r,isSorted:s,sortBy:i.value,someSelected:n.value,allSelected:u.value,selectAll:d,getSortIcon:b}))),I=(0,l.EW)((()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky},F.value,v.value])),_=t=>{let{column:o,x:c,y:m}=t;const f="data-table-select"===o.key||"data-table-expand"===o.key,v=(0,l.v6)(e.headerProps??{},o.headerProps??{});return(0,l.bF)(qe,(0,l.v6)({tag:"th",align:o.align,class:[{"v-data-table__th--sortable":o.sortable&&!e.disableSort,"v-data-table__th--sorted":s(o),"v-data-table__th--fixed":o.fixed},...I.value],style:{width:(0,k.Dg)(o.width),minWidth:(0,k.Dg)(o.minWidth),maxWidth:(0,k.Dg)(o.maxWidth),...g(o,m)},colspan:o.colspan,rowspan:o.rowspan,onClick:o.sortable?()=>r(o):void 0,fixed:o.fixed,nowrap:o.nowrap,lastFixed:o.lastFixed,noPadding:f},v),{default:()=>{const t=`header.${o.key}`,c={column:o,selectAll:d,isSorted:s,toggleSort:r,sortBy:i.value,someSelected:n.value,allSelected:u.value,getSortIcon:b};return a[t]?a[t](c):"data-table-select"===o.key?a["header.data-table-select"]?.(c)??(p.value&&(0,l.bF)(Ke.M,{modelValue:u.value,indeterminate:n.value&&!u.value,"onUpdate:modelValue":d},null)):(0,l.bF)("div",{class:"v-data-table-header__content"},[(0,l.bF)("span",null,[o.title]),o.sortable&&!e.disableSort&&(0,l.bF)(W.w,{key:"icon",class:"v-data-table-header__sort-icon",icon:b(o)},null),e.multiSort&&s(o)&&(0,l.bF)("div",{key:"badge",class:["v-data-table-header__sort-badge",...y.value],style:w.value},[i.value.findIndex((e=>e.key===o.key))+1])])}})},V=()=>{const t=(0,l.v6)(e.headerProps??{}??{}),p=(0,l.EW)((()=>m.value.filter((t=>t?.sortable&&!e.disableSort)))),v=(0,l.EW)((()=>{const e=m.value.find((e=>"data-table-select"===e.key));if(null!=e)return u.value?"$checkboxOn":n.value?"$checkboxIndeterminate":"$checkboxOff"}));return(0,l.bF)(qe,(0,l.v6)({tag:"th",class:[...I.value],colspan:f.value.length+1},t),{default:()=>[(0,l.bF)("div",{class:"v-data-table-header__content"},[(0,l.bF)(Ae.d4,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:p.value,label:o("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>i.value=[],appendIcon:v.value,"onClick:append":()=>d(!u.value)},{...a,chip:e=>(0,l.bF)(c.x,{onClick:e.item.raw?.sortable?()=>r(e.item.raw):void 0,onMousedown:e=>{e.preventDefault(),e.stopPropagation()}},{default:()=>[e.item.title,(0,l.bF)(W.w,{class:["v-data-table__td-sort-icon",s(e.item.raw)&&"v-data-table__td-sort-icon-active"],icon:b(e.item.raw),size:"small"},null)]})})])]})};(0,x.C)((()=>S.value?(0,l.bF)("tr",null,[(0,l.bF)(V,null,null)]):(0,l.bF)(l.FK,null,[a.headers?a.headers(P.value):f.value.map(((e,t)=>(0,l.bF)("tr",null,[e.map(((e,a)=>(0,l.bF)(_,{column:e,x:a,y:t},null)))]))),e.loading&&(0,l.bF)("tr",{class:"v-data-table-progress"},[(0,l.bF)("th",{colspan:m.value.length},[(0,l.bF)(Ft.E2,{name:"v-data-table-progress",absolute:!0,active:!0,color:"boolean"===typeof e.loading?void 0:e.loading,indeterminate:!0},{default:a.loader})])])])))}}),Pt=(0,w.j)({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),It=Symbol.for("vuetify:data-table-group");function _t(e){const t=(0,b.q)(e,"groupBy");return{groupBy:t}}function Vt(e){const{groupBy:t,sortBy:a}=e,o=(0,y.KR)(new Set),r=(0,l.EW)((()=>t.value.map((e=>({...e,order:e.order??!1}))).concat(a.value)));function i(e){return o.value.has(e.id)}function s(e){const t=new Set(o.value);i(e)?t.delete(e.id):t.add(e.id),o.value=t}function n(e){function t(e){const a=[];for(const l of e.items)"type"in l&&"group"===l.type?a.push(...t(l)):a.push(l);return a}return t({type:"group",items:e,id:"dummy",key:"dummy",value:"dummy",depth:0})}const u={sortByWithGroups:r,toggleGroup:s,opened:o,groupBy:t,extractRows:n,isGroupOpen:i};return(0,l.Gt)(It,u),u}function Ct(){const e=(0,l.WQ)(It);if(!e)throw new Error("Missing group!");return e}function Wt(e,t){if(!e.length)return[];const a=new Map;for(const l of e){const e=(0,k.no)(l.raw,t);a.has(e)||a.set(e,[]),a.get(e).push(l)}return a}function Dt(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"root";if(!t.length)return[];const o=Wt(e,t[0]),r=[],i=t.slice(1);return o.forEach(((e,o)=>{const s=t[0],n=`${l}_${s}_${o}`;r.push({depth:a,id:n,key:s,value:o,items:i.length?Dt(e,i,a+1,n):e,type:"group"})})),r}function Et(e,t){const a=[];for(const l of e)"type"in l&&"group"===l.type?(null!=l.value&&a.push(l),(t.has(l.id)||null==l.value)&&a.push(...Et(l.items,t))):a.push(l);return a}function $t(e,t,a){const o=(0,l.EW)((()=>{if(!t.value.length)return e.value;const l=Dt(e.value,t.value.map((e=>e.key)));return Et(l,a.value)}));return{flatItems:o}}const At=(0,w.j)({item:{type:Object,required:!0}},"VDataTableGroupHeaderRow"),Lt=(0,F.RW)()({name:"VDataTableGroupHeaderRow",props:At(),setup(e,t){let{slots:a}=t;const{isGroupOpen:o,toggleGroup:r,extractRows:s}=Ct(),{isSelected:n,isSomeSelected:u,select:d}=mt(),{columns:c}=it(),p=(0,l.EW)((()=>s([e.item])));return()=>(0,l.bF)("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[c.value.map((t=>{if("data-table-group"===t.key){const t=o(e.item)?"$expand":"$next",s=()=>r(e.item);return a["data-table-group"]?.({item:e.item,count:p.value.length,props:{icon:t,onClick:s}})??(0,l.bF)(qe,{class:"v-data-table-group-header-row__column"},{default:()=>[(0,l.bF)(i.D,{size:"small",variant:"text",icon:t,onClick:s},null),(0,l.bF)("span",null,[e.item.value]),(0,l.bF)("span",null,[(0,l.eW)("("),p.value.length,(0,l.eW)(")")])]})}if("data-table-select"===t.key){const e=n(p.value),t=u(p.value)&&!e,o=e=>d(p.value,e);return a["data-table-select"]?.({props:{modelValue:e,indeterminate:t,"onUpdate:modelValue":o}})??(0,l.bF)("td",null,[(0,l.bF)(Ke.M,{modelValue:e,indeterminate:t,"onUpdate:modelValue":o},null)])}return(0,l.bF)("td",null,null)}))])}}),Bt=(0,w.j)({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),Tt=Symbol.for("vuetify:datatable:expanded");function Nt(e){const t=(0,y.lW)(e,"expandOnClick"),a=(0,b.q)(e,"expanded",e.expanded,(e=>new Set(e)),(e=>[...e.values()]));function o(e,t){const l=new Set(a.value);t?l.add(e.value):l.delete(e.value),a.value=l}function r(e){return a.value.has(e.value)}function i(e){o(e,!r(e))}const s={expand:o,expanded:a,expandOnClick:t,isExpanded:r,toggleExpand:i};return(0,l.Gt)(Tt,s),s}function Rt(){const e=(0,l.WQ)(Tt);if(!e)throw new Error("foo");return e}const Ot=(0,w.j)({index:Number,item:Object,cellProps:[Object,Function],onClick:(0,k.uR)(),onContextmenu:(0,k.uR)(),onDblclick:(0,k.uR)(),...(0,be.hx)()},"VDataTableRow"),jt=(0,F.RW)()({name:"VDataTableRow",props:Ot(),setup(e,t){let{slots:a}=t;const{displayClasses:s,mobile:n}=(0,be._F)(e,"v-data-table__tr"),{isSelected:u,toggleSelect:d,someSelected:c,allSelected:p,selectAll:m}=mt(),{isExpanded:f,toggleExpand:v}=Rt(),{toggleSort:g,sortBy:h,isSorted:b}=bt(),{columns:y}=it();(0,x.C)((()=>(0,l.bF)("tr",{class:["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},s.value],onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&y.value.map(((t,s)=>{const y=e.item,w=`item.${t.key}`,F=`header.${t.key}`,x={index:e.index,item:y.raw,internalItem:y,value:(0,k.no)(y.columns,t.key),column:t,isSelected:u,toggleSelect:d,isExpanded:f,toggleExpand:v},S={column:t,selectAll:m,isSorted:b,toggleSort:g,sortBy:h.value,someSelected:c.value,allSelected:p.value,getSortIcon:()=>""},P="function"===typeof e.cellProps?e.cellProps({index:x.index,item:x.item,internalItem:x.internalItem,value:x.value,column:t}):e.cellProps,I="function"===typeof t.cellProps?t.cellProps({index:x.index,item:x.item,internalItem:x.internalItem,value:x.value}):t.cellProps;return(0,l.bF)(qe,(0,l.v6)({align:t.align,class:{"v-data-table__td--expanded-row":"data-table-expand"===t.key,"v-data-table__td--select-row":"data-table-select"===t.key},fixed:t.fixed,fixedOffset:t.fixedOffset,lastFixed:t.lastFixed,maxWidth:n.value?void 0:t.maxWidth,noPadding:"data-table-select"===t.key||"data-table-expand"===t.key,nowrap:t.nowrap,width:n.value?void 0:t.width},P,I),{default:()=>{if(a[w]&&!n.value)return a[w]?.(x);if("data-table-select"===t.key)return a["item.data-table-select"]?.(x)??(0,l.bF)(Ke.M,{disabled:!y.selectable,modelValue:u([y]),onClick:(0,r.D$)((()=>d(y)),["stop"])},null);if("data-table-expand"===t.key)return a["item.data-table-expand"]?.(x)??(0,l.bF)(i.D,{icon:f(y)?"$collapse":"$expand",size:"small",variant:"text",onClick:(0,r.D$)((()=>v(y)),["stop"])},null);const e=(0,o.v_)(x.value);return n.value?(0,l.bF)(l.FK,null,[(0,l.bF)("div",{class:"v-data-table__td-title"},[a[F]?.(S)??t.title]),(0,l.bF)("div",{class:"v-data-table__td-value"},[a[w]?.(x)??e])]):e}})}))])))}});function Ut(e,t,a){return Object.keys(e).filter((e=>(0,k.Mp)(e)&&e.endsWith(t))).reduce(((l,o)=>(l[o.slice(0,-t.length)]=t=>e[o](t,a(t)),l)),{})}const Mt=(0,w.j)({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...(0,be.hx)()},"VDataTableRows"),qt=(0,F.RW)()({name:"VDataTableRows",inheritAttrs:!1,props:Mt(),setup(e,t){let{attrs:a,slots:o}=t;const{columns:r}=it(),{expandOnClick:i,toggleExpand:s,isExpanded:n}=Rt(),{isSelected:u,toggleSelect:d}=mt(),{toggleGroup:c,isGroupOpen:p}=Ct(),{t:m}=(0,h.Ym)(),{mobile:f}=(0,be._F)(e);return(0,x.C)((()=>!e.loading||e.items.length&&!o.loading?e.loading||e.items.length||e.hideNoData?(0,l.bF)(l.FK,null,[e.items.map(((t,m)=>{if("group"===t.type){const e={index:m,item:t,columns:r.value,isExpanded:n,toggleExpand:s,isSelected:u,toggleSelect:d,toggleGroup:c,isGroupOpen:p};return o["group-header"]?o["group-header"](e):(0,l.bF)(Lt,(0,l.v6)({key:`group-header_${t.id}`,item:t},Ut(a,":group-header",(()=>e))),o)}const v={index:m,item:t.raw,internalItem:t,columns:r.value,isExpanded:n,toggleExpand:s,isSelected:u,toggleSelect:d},g={...v,props:(0,l.v6)({key:`item_${t.key??t.index}`,onClick:i.value?()=>{s(t)}:void 0,index:m,item:t,cellProps:e.cellProps,mobile:f.value},Ut(a,":row",(()=>v)),"function"===typeof e.rowProps?e.rowProps({item:v.item,index:v.index,internalItem:v.internalItem}):e.rowProps)};return(0,l.bF)(l.FK,{key:g.props.key},[o.item?o.item(g):(0,l.bF)(jt,g.props,o),n(t)&&o["expanded-row"]?.(v)])}))]):(0,l.bF)("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[(0,l.bF)("td",{colspan:r.value.length},[o["no-data"]?.()??m(e.noDataText)])]):(0,l.bF)("tr",{class:"v-data-table-rows-loading",key:"loading"},[(0,l.bF)("td",{colspan:r.value.length},[o.loading?.()??m(e.loadingText)])]))),{}}}),Kt=(0,w.j)({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,...(0,we.u)(),...(0,Fe.r)(),...(0,Ce.X)(),...(0,We.yx)()},"VTable"),zt=(0,F.RW)()({name:"VTable",props:Kt(),setup(e,t){let{slots:a,emit:o}=t;const{themeClasses:r}=(0,We.NX)(e),{densityClasses:i}=(0,Fe.Q)(e);return(0,x.C)((()=>(0,l.bF)(e.tag,{class:["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!a.top,"v-table--has-bottom":!!a.bottom,"v-table--hover":e.hover},r.value,i.value,e.class],style:e.style},{default:()=>[a.top?.(),a.default?(0,l.bF)("div",{class:"v-table__wrapper",style:{height:(0,k.Dg)(e.height)}},[(0,l.bF)("table",null,[a.default()])]):a.wrapper?.(),a.bottom?.()]}))),{}}}),Gt=(0,w.j)({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function Xt(e,t,a,l){const o=e.returnObject?t:(0,k.TD)(t,e.itemValue),r=(0,k.TD)(t,e.itemSelectable,!0),i=l.reduce(((e,a)=>(null!=a.key&&(e[a.key]=(0,k.TD)(t,a.value)),e)),{});return{type:"item",key:e.returnObject?(0,k.TD)(t,e.itemValue):o,index:a,value:o,selectable:r,columns:i,raw:t}}function Ht(e,t,a){return t.map(((t,l)=>Xt(e,t,l,a)))}function Yt(e,t){const a=(0,l.EW)((()=>Ht(e,e.items,t.value)));return{items:a}}function Qt(e){let{page:t,itemsPerPage:a,sortBy:o,groupBy:r,search:i}=e;const s=(0,Le.nI)("VDataTable"),n=(0,l.EW)((()=>({page:t.value,itemsPerPage:a.value,sortBy:o.value,groupBy:r.value,search:i.value})));let u=null;(0,l.wB)(n,(()=>{(0,k.bD)(u,n.value)||(u&&u.search!==n.value.search&&(t.value=1),s.emit("update:options",n.value),u=n.value)}),{deep:!0,immediate:!0})}const Jt=(e,t,a)=>null==e||null==t?-1:e.toString().toLocaleLowerCase().indexOf(t.toString().toLocaleLowerCase()),Zt=(0,w.j)({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function ea(e,t,a){const l=[],o=a?.default??Jt,r=!!a?.filterKeys&&(0,k.BN)(a.filterKeys),i=Object.keys(a?.customKeyFilter??{}).length;if(!e?.length)return l;e:for(let s=0;s<e.length;s++){const[n,u=n]=(0,k.BN)(e[s]),d={},c={};let p=-1;if((t||i>0)&&!a?.noFilter){if("object"===typeof n){const e=r||Object.keys(u);for(const l of e){const e=(0,k.TD)(u,l),r=a?.customKeyFilter?.[l];if(p=r?r(e,t,n):o(e,t,n),-1!==p&&!1!==p)r?d[l]=p:c[l]=p;else if("every"===a?.filterMode)continue e}}else p=o(n,t,n),-1!==p&&!1!==p&&(c.title=p);const e=Object.keys(c).length,l=Object.keys(d).length;if(!e&&!l)continue;if("union"===a?.filterMode&&l!==i&&!e)continue;if("intersection"===a?.filterMode&&(l!==i||!e))continue}l.push({index:s,matches:{...c,...d}})}return l}function ta(e,t,a,o){const r=(0,y.KR)([]),i=(0,y.KR)(new Map),s=(0,l.EW)((()=>o?.transform?(0,y.R1)(t).map((e=>[e,o.transform(e)])):(0,y.R1)(t)));function n(e){return i.value.get(e.value)}return(0,l.nT)((()=>{const l="function"===typeof a?a():(0,y.R1)(a),n="string"!==typeof l&&"number"!==typeof l?"":String(l),u=ea(s.value,n,{customKeyFilter:{...e.customKeyFilter,...(0,y.R1)(o?.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),d=(0,y.R1)(t),c=[],p=new Map;u.forEach((e=>{let{index:t,matches:a}=e;const l=d[t];c.push(l),p.set(l.value,a)})),r.value=c,i.value=p})),{filteredItems:r,filteredMatches:i,getMatches:n}}const aa=(0,w.j)({...Mt(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...Bt(),...Pt(),...Ge(),...Gt(),...dt(),...ft(),...xt(),...Kt()},"DataTable"),la=(0,w.j)({...Be(),...aa(),...Zt(),...Ue()},"VDataTable"),oa=(0,F.RW)()({name:"VDataTable",props:la(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,t){let{attrs:a,slots:o}=t;const{groupBy:r}=_t(e),{sortBy:i,multiSort:s,mustSort:n}=gt(e),{page:u,itemsPerPage:c}=Ne(e),{columns:p,headers:m,sortFunctions:f,sortRawFunctions:v,filterFunctions:g}=rt(e,{groupBy:r,showSelect:(0,y.lW)(e,"showSelect"),showExpand:(0,y.lW)(e,"showExpand")}),{items:h}=Yt(e,p),b=(0,y.lW)(e,"search"),{filteredItems:w}=ta(e,h,b,{transform:e=>e.columns,customKeyFilter:g}),{toggleSort:k}=ht({sortBy:i,multiSort:s,mustSort:n,page:u}),{sortByWithGroups:F,opened:S,extractRows:P,isGroupOpen:I,toggleGroup:_}=Vt({groupBy:r,sortBy:i}),{sortedItems:V}=yt(e,w,F,{transform:e=>e.columns,sortFunctions:f,sortRawFunctions:v}),{flatItems:C}=$t(V,r,S),W=(0,l.EW)((()=>C.value.length)),{startIndex:D,stopIndex:E,pageCount:$,setItemsPerPage:A}=Re({page:u,itemsPerPage:c,itemsLength:W}),{paginatedItems:L}=je({items:C,startIndex:D,stopIndex:E,itemsPerPage:c}),B=(0,l.EW)((()=>P(L.value))),{isSelected:T,select:N,selectAll:R,toggleSelect:O,someSelected:j,allSelected:U}=pt(e,{allItems:h,currentPage:B}),{isExpanded:M,toggleExpand:q}=Nt(e);Qt({page:u,itemsPerPage:c,sortBy:i,groupBy:r,search:b}),(0,ke.Uh)({VDataTableRows:{hideNoData:(0,y.lW)(e,"hideNoData"),noDataText:(0,y.lW)(e,"noDataText"),loading:(0,y.lW)(e,"loading"),loadingText:(0,y.lW)(e,"loadingText")}});const K=(0,l.EW)((()=>({page:u.value,itemsPerPage:c.value,sortBy:i.value,pageCount:$.value,toggleSort:k,setItemsPerPage:A,someSelected:j.value,allSelected:U.value,isSelected:T,select:N,selectAll:R,toggleSelect:O,isExpanded:M,toggleExpand:q,isGroupOpen:I,toggleGroup:_,items:B.value.map((e=>e.raw)),internalItems:B.value,groupedItems:L.value,columns:p.value,headers:m.value})));return(0,x.C)((()=>{const t=Me.filterProps(e),r=St.filterProps(e),i=qt.filterProps(e),s=zt.filterProps(e);return(0,l.bF)(zt,(0,l.v6)({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},s),{top:()=>o.top?.(K.value),default:()=>o.default?o.default(K.value):(0,l.bF)(l.FK,null,[o.colgroup?.(K.value),!e.hideDefaultHeader&&(0,l.bF)("thead",{key:"thead"},[(0,l.bF)(St,r,o)]),o.thead?.(K.value),!e.hideDefaultBody&&(0,l.bF)("tbody",null,[o["body.prepend"]?.(K.value),o.body?o.body(K.value):(0,l.bF)(qt,(0,l.v6)(a,i,{items:L.value}),o),o["body.append"]?.(K.value)]),o.tbody?.(K.value),o.tfoot?.(K.value)]),bottom:()=>o.bottom?o.bottom(K.value):!e.hideDefaultFooter&&(0,l.bF)(l.FK,null,[(0,l.bF)(d.G,null,null),(0,l.bF)(Me,t,{prepend:o["footer.prepend"]})])})})),{}}}),ra=["onClick"],ia={key:0,class:"text-success"},sa={key:1,class:"text-danger"};function na(e,t,a,i,u,d){return(0,l.uX)(),(0,l.Wv)(s.J,null,{default:(0,l.k6)((()=>[(0,l.bF)(oa,{headers:u.headers,items:d.filteredOrders,"items-per-page":5,class:"elevation-1"},{top:(0,l.k6)((()=>[(0,l.bF)(n.O,null,{default:(0,l.k6)((()=>[(0,l.bF)(B.W,{class:"mx-4 mb-2",modelValue:u.search,"onUpdate:modelValue":t[0]||(t[0]=e=>u.search=e),onInput:d.onClick,loading:u.loading,"append-inner-icon":"mdi-magnify",density:"compact",label:"搜尋訂單編號",placeholder:"輸入訂單編號",variant:"solo","hide-details":"","single-line":""},null,8,["modelValue","onInput","loading"])])),_:1})])),"item.create_at":(0,l.k6)((({item:t})=>[(0,l.eW)((0,o.v_)(e.$filters.date(t.create_at)),1)])),"item.orderId":(0,l.k6)((({item:e})=>[(0,l.Lk)("a",{onClick:(0,r.D$)((t=>d.viewOrder(e)),["prevent"]),class:"order-Id"},(0,o.v_)(e.orderId),9,ra)])),"item.cartTotal":(0,l.k6)((({item:t})=>[(0,l.eW)((0,o.v_)(e.$filters.currency(t.cartTotal)),1)])),"item.is_paid":(0,l.k6)((({item:e})=>[!0===e.is_paid?((0,l.uX)(),(0,l.CE)("span",ia,"已付款")):((0,l.uX)(),(0,l.CE)("span",sa,"未付款"))])),_:1},8,["headers","items"])])),_:1})}var ua={name:"OrderHistory",props:{ordersInfo:{type:Array,default:()=>[]}},data(){return{search:"",loaded:!1,loading:!1,headers:[{title:"訂單日期",key:"create_at"},{title:"訂單編號",key:"orderId",sortable:!1},{title:"金額",key:"cartTotal"},{title:"付款方式",key:"payment",sortable:!1},{title:"付款狀態",key:"is_paid",sortable:!1}],orders:[],localOrdersInfo:this.ordersInfo}},watch:{ordersInfo:{immediate:!0,handler(e){Array.isArray(e)?this.localOrdersInfo=e:this.localOrdersInfo=[]}}},mounted(){this.orders=[],this.localOrdersInfo.forEach((e=>{const t={orderId:e.orderId,create_at:e.create_at,is_paid:e.is_paid,cartTotal:e.cartTotal,payment:e.payment};this.orders.push(t),this.orders.sort(((e,t)=>t.create_at-e.create_at))}))},computed:{filteredOrders(){return""===this.search?this.orders:this.orders.filter((e=>e.orderId.includes(this.search)))}},methods:{onClick(){this.loading=!0,setTimeout((()=>{this.loading=!1,this.loaded=!0}),1500)},viewOrder(e){console.log("查看訂單",e.orderId),this.$router.push(`/checkout/${e.orderId}`)}}};const da=(0,ce.A)(ua,[["render",na],["__scopeId","data-v-515651cc"]]);var ca=da,pa=a.p+"img/google.3713fc55.png",ma={data(){return{googleLogo:pa,showPassword:!1,isLoading:!1,tab:0,isLogin:!1,isRegistering:!1,displayName:"",userInfo:[],carts:[],member:{name:"",email:"",password:"",phone:"",address:"",image:null},uploadImageDetail:null,valid:!1,login:{account:"",password:""},tabCtrl:!0,propsItem:{},rules:{noSpacesOrSpecial:e=>{const t=/^[^\s!@#$%^&*(),.?":{}|<>]*$/;return t.test(e)||"不得包含空白或特殊符號"},required:e=>!!e||"此欄位為必填項",email:e=>{const t=/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/;return t.test(e)||"請輸入有效的電子郵件地址"},phone:e=>{const t=/^09\d{8}$/;return t.test(e)||"請輸入正確的手機號碼"},min:e=>e.length>=6||"密碼至少需要6個字符",max:e=>e.length<=25||"姓名最多25個字符",hasUpperCase:e=>/[A-Z]/.test(e)||"需包含至少一個大寫英文字母",hasLowerCase:e=>/[a-z]/.test(e)||"需包含至少一個小寫英文字母"},uid:null}},components:{OrderHistory:ca,ForgetPassword:he,Register:me},watch:{isLogin(e,t){e?(this.updateCartItem(this.uid),console.log("User is logged in with UID:",e)):console.log("User is logged out or email is not verified")}},created(){this.isLoading=!0,(0,ue.hg)(se.j2,(e=>{e&&e.emailVerified&&(this.isLogin=!0,this.uid=e.uid,this.displayName=e.displayName,this.member.name=e.displayName,this.member.email=e.email,"password"===e.providerData[0].providerId?this.tabCtrl=!0:this.tabCtrl=!1)})),this.$emitter.on("logout-user",(()=>{this.logout(),this.isLogin=!1})),this.isLoading=!1},mounted(){(0,ue.hg)(se.j2,(e=>{e&&e.emailVerified&&this.getUserInfo(e.uid)})),this.$emitter.on("logout-user",(()=>{this.logout(),this.switchTab(0)}))},beforeUnmount(){this.$emitter.off("logout-user",(()=>{this.logout()}))},methods:{switchTab(e){this.tab=e},triggerFileInput(){this.$refs.fileInput.$el.querySelector("input").click()},onImageChange(e){const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{this.member.image=e.target.result},e.readAsDataURL(t)}},removeImage(){this.member.image=null,this.uploadImageDetail=null},updateMember(){this.$refs.profileForm.validate().then((e=>{!1===e.valid?ie.A.fire({icon:"error",title:"請輸入正確資訊"}):(0,ue.r7)(se.j2.currentUser,{displayName:this.member.name}).then((()=>{this.displayName=this.member.name,this.updateUserInfo(se.j2.currentUser.uid,this.member.address,this.member.phone,this.member.image),ie.A.fire({icon:"success",title:"修改成功"})})).catch((e=>{console.log(`錯誤：${e.message}`),ie.A.fire({icon:"error",title:"修改失敗"})}))}))},async updateUserInfo(e,t,a,l){try{const o=(0,ne.H9)(se.db,"userInfo",e);await(0,ne.mZ)(o,{address:t,phoneNumber:a,photoURL:l}),this.$emitter.emit("update-user-login-photo",this.member)}catch(o){console.error("Error updating document: ",o)}},async getUserInfo(e){try{const t=(0,ne.rJ)(se.db,"userInfo"),a=await(0,ne.GG)(t);this.userInfo=[],a.forEach((e=>{let t=e.data();t.id=e.id,this.userInfo.push({id:t.id,address:t.address,phoneNumber:t.phoneNumber,photoURL:t.photoURL,orders:t.orders})})),this.userInfo.forEach((t=>{t.id===e&&(this.propsItem=t.orders,this.member.address=t.address,this.member.phone=t.phoneNumber,this.member.image=t.photoURL)}))}catch(t){console.error("Error fetching user info:",t)}},togglePasswordVisibility(){this.showPassword=!this.showPassword},loginSubmit(){this.isLoading=!0,this.isRegistering=!1,this.$refs.loginForm.validate().then((e=>{!1===e.valid?ie.A.fire({icon:"error",title:"請輸入正確資訊"}):(0,ue.x9)(se.j2,this.login.account,this.login.password).then((e=>{this.getAuthState()})).catch((e=>{switch(console.log(`錯誤：${e.message}`),e.message){case"Firebase: Error (auth/user-not-found).":ie.A.fire({icon:"error",title:"帳號不存在"});break;case"Firebase: Error (auth/wrong-password).":ie.A.fire({icon:"error",title:"密碼錯誤"});break;case"Firebase: Error (auth/invalid-credential).":ie.A.fire({icon:"error",title:"登入失敗，帳號或密碼錯誤"});break;default:ie.A.fire({icon:"error",title:"登入失敗"})}}))})),this.isLoading=!1},getAuthState(){(0,ue.hg)(se.j2,(e=>{e&&(e.emailVerified?(this.login={account:"",password:""},ie.A.fire({icon:"success",title:`${e.displayName}歡迎回來`}),this.isLogin=!0,this.displayName=e.displayName,this.member.name=e.displayName,this.member.email=e.email,this.$emitter.emit("update-user-status")):!1===this.isRegistering&&!1===e.emailVerified&&ie.A.fire({icon:"info",title:"請至信箱驗證帳號"}))}))},async loginWithGoogle(){try{const e=await(0,ue.df)(se.j2,se.PW),t=e.user;this.checkDocExistsMixin(t),ie.A.fire({icon:"success",title:`${t.displayName}歡迎回來`})}catch(e){console.error("Error during Google login:",e)}},async checkDocExists(e){try{const t=(0,ne.H9)(se.db,"userInfo",e),a=await(0,ne.x7)(t);return!!a.exists()}catch(t){return console.error("Error checking document existence: ",t),!1}},checkDocExistsMixin(e){const t=this.checkDocExists(e.uid);t.then((t=>{!1===t&&(this.member.image=e.photoURL,this.addUserInfoWithCustomId(e.uid,this.member.image),this.$emitter.emit("update-user-login-photo",this.member))})).catch((e=>{console.error("Promise rejected with:",e)}))},async addUserInfoWithCustomId(e,t){try{const a=(0,ne.H9)(se.db,"userInfo",e);await(0,ne.BN)(a,{address:"",phoneNumber:"",photoURL:t,orders:[],cartItem:[],favorite:[]})}catch(a){console.error("Error adding document: ",a)}},async updateCartItem(e){const t=await this.getCart();if(0===t.length&&null!==e){const t="https://vue3-course-api.hexschool.io/api/luxefume-api/cart",l=(0,ne.rJ)(se.db,"userInfo"),o=(0,ne.H9)(l,e),r=await(0,ne.x7)(o);if(r.exists()){const e=r.data().cartItem;for(const l of e){const o={product_id:l.product.id,qty:l.qty};try{await this.$http.post(t,{data:o}),e=e.filter((e=>e!==l))}catch(a){}}this.$emitter.emit("update-total"),console.log("userCartItems:",e)}else console.log("No such document!")}},async getCart(){const e="https://vue3-course-api.hexschool.io/api/luxefume-api/cart";this.isLoading=!0;let t=[];try{const a=await this.$http.get(e);t=a.data.data.carts}catch(a){ie.A.fire({title:"資料讀取失敗，請稍後再試",icon:"error"})}finally{this.isLoading=!1}return t},logout(){this.$swal({title:"確定要登出嗎?",icon:"warning",showCancelButton:!0,scrollbarPadding:!1,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"是",cancelButtonText:"否"}).then((e=>{e.isConfirmed&&(this.isLoading=!0,(0,ue.CI)(se.j2).then((()=>{this.isLoading=!1,this.isLogin=!1,this.tab=0,this.removeAllCartItem(),ie.A.fire({icon:"success",title:`${this.displayName}貴賓，期待您的再次光臨`}),this.$emitter.emit("update-user-status"),this.member={name:"",email:"",password:"",phone:"",address:"",image:null}})).catch((()=>{ie.A.fire({icon:"error",title:"發生錯誤，請重新整理頁面"})})))}))},removeAllCartItem(){const e="https://vue3-course-api.hexschool.io/api/luxefume-api/carts";this.$http.delete(e).then((()=>{this.$emitter.emit("update-total")})).catch((e=>{console.error(e)}))}}};const fa=(0,ce.A)(ma,[["render",oe],["__scopeId","data-v-6979663a"]]);var va=fa},7027:function(e,t,a){a.d(t,{n:function(){return p}});var l=a(641),o=a(5851),r=a(5596),i=a(9823),s=a(9841),n=a(1094),u=a(2636),d=a(4675);const c=(0,n.j)({...(0,o.u)(),...(0,r.pE)()},"VForm"),p=(0,u.RW)()({name:"VForm",props:c(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:a,emit:o}=t;const n=(0,r.DG)(e),u=(0,s.KR)();function c(e){e.preventDefault(),n.reset()}function p(e){const t=e,a=n.validate();t.then=a.then.bind(a),t.catch=a.catch.bind(a),t.finally=a.finally.bind(a),o("submit",t),t.defaultPrevented||a.then((e=>{let{valid:t}=e;t&&u.value?.submit()})),t.preventDefault()}return(0,d.C)((()=>(0,l.bF)("form",{ref:u,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:c,onSubmit:p},[a.default?.(n)]))),(0,i.O)(n,u)}})}}]);
//# sourceMappingURL=219.644de036.js.map